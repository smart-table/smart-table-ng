{"version":3,"file":"st-sort.directive.js","sourceRoot":"","sources":["../package/src/st-sort.directive.ts"],"names":[],"mappings":";;;;AAAA,OAAO,EAAC,SAAS,EAAE,KAAK,EAAE,WAAW,EAAE,YAAY,EAAqB,UAAU,EAAC,MAAM,eAAe,CAAC;AACzG,OAAO,EAAC,UAAU,EAAC,MAAM,uBAAuB,CAAC;AACjD,OAAO,EAAC,IAAI,EAAC,MAAM,kBAAkB,CAAC;;;;AAQtC,MAAM;;;;;IAKF,YAAoB,KAAoB,EAAU,GAAe;QAA7C,UAAK,GAAL,KAAK,CAAe;QAAU,QAAG,GAAH,GAAG,CAAY;;qBAGhC,CAAC;qBAIc,KAAK;KANpD;;;;QAQqC,KAAK;QACvC,MAAM,CAAC,IAAI,CAAC,oBAAoB,oBAAsB,CAAC;;;;;QAGpB,MAAM;QACzC,MAAM,CAAC,IAAI,CAAC,oBAAoB,sBAAuB,CAAC;;;;;IAGrC,MAAM;QACzB,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC;;;;;IAG7B,QAAQ;QACJ,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;YACnB,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,KAAK,IAAI,IAAI,IAAI,CAAC,KAAK,KAAK,MAAM;YAC7F,YAAY,EAAE,IAAI,CAAC,KAAK;SAC3B,CAAC,CAAC;QACH,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC,EAAC,SAAS,EAAE,OAAO,EAAC,EAAE,EAAE;YAClD,IAAI,CAAC,oBAAoB,GAAG,OAAO,KAAK,IAAI,CAAC,OAAO,CAAC,CAAC,mBAAgB,SAAS,EAAC,CAAC,kBAAmB,CAAC;SACxG,CAAC,CAAC;QACH,uBAAM,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC;QAC1C,IAAI,CAAC,oBAAoB,GAAG,SAAS,CAAC,OAAO,KAAK,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,SAAS,mBAAqB,CAAC,CAAC,CAAC,kBAAmB,CAAC;KACpI;;;;IAED,WAAW;QACP,IAAI,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC;KACzB;;;YA5CJ,SAAS,SAAC;gBACP,QAAQ,EAAE,UAAU;gBACpB,QAAQ,EAAE,QAAQ;aACrB;;;;YARO,UAAU;YADsD,UAAU;;;sBAkB7E,KAAK,SAAC,gBAAgB;wBAEtB,KAAK,SAAC,QAAQ;sBAEd,KAAK,SAAC,aAAa;sBAEnB,WAAW,SAAC,mBAAmB;uBAI/B,WAAW,SAAC,oBAAoB;uBAIhC,YAAY,SAAC,OAAO","sourcesContent":["import {Directive, Input, HostBinding, HostListener, OnInit, OnDestroy, ElementRef} from '@angular/core';\nimport {SmartTable} from './smart-table.service';\nimport {sort} from 'smart-table-core';\nimport {SortDirection} from './common-types';\n\n\n@Directive({\n    selector: '[stSort]',\n    exportAs: 'stSort'\n})\nexport class StSortDirective<T> implements OnInit, OnDestroy {\n    private _directive: any;\n\n    currentSortDirection: SortDirection = SortDirection.NONE;\n\n    constructor(private table: SmartTable<T>, private _el: ElementRef) {\n    }\n\n    @Input('stDebounceTime') delay = 0;\n\n    @Input('stSort') pointer: string;\n\n    @Input('stSortCycle') cycle: boolean | string = false;\n\n    @HostBinding('class.st-sort-asc') get isAsc() {\n        return this.currentSortDirection === SortDirection.ASC;\n    }\n\n    @HostBinding('class.st-sort-desc') get isDesc() {\n        return this.currentSortDirection === SortDirection.DESC;\n    }\n\n    @HostListener('click') toggle(): void {\n        this._directive.toggle();\n    }\n\n    ngOnInit() {\n        this._directive = sort({\n            table: this.table, pointer: this.pointer, cycle: this.cycle === true || this.cycle === 'true',\n            debounceTime: this.delay\n        });\n        this._directive.onSortToggle(({direction, pointer}) => {\n            this.currentSortDirection = pointer === this.pointer ? <SortDirection>direction : SortDirection.NONE;\n        });\n        const initState = this._directive.state();\n        this.currentSortDirection = initState.pointer === this.pointer ? (initState.direction || SortDirection.ASC) : SortDirection.NONE;\n    }\n\n    ngOnDestroy() {\n        this._directive.off();\n    }\n}\n"]}